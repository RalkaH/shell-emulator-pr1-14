# shell-emulator-pr1-14

Эмулятор оболочки UNIX для практической работы №1. Вариант - 14

---

## Этап 1: REPL — базовый графический эмулятор

Реализован минимальный прототип с GUI.

- Заголовок окна: `Эмулятор - [user@host]`
- Поддержка команд: `ls`, `cd`, `exit`
- Ошибки: неизвестная команда, неверные аргументы
- Диалог с пользователем в интерактивном режиме

> На этом этапе все команды — заглушки, выводят своё имя и аргументы.

---

## Этап 2: Конфигурация — параметры и логирование

Добавлена поддержка параметров командной строки:

```bash
python3 main.py --vfs <путь> --log <путь> [--script <путь>]
```

--vfs — путь к директории VFS
--log — путь к лог-файлу (JSON)
--script — путь к стартовому скрипту
Логирование:

Формат JSON
Содержит: user, command, args, timestamp
Стартовый скрипт:

Выполняет команды построчно
Останавливается при первой ошибке
Имитирует диалог (выводит $ команда и результат)

## Этап 3: VFS — виртуальная файловая система
VFS — обычная директория на диске, работает в памяти.

Команды:

ls [путь] — показывает реальное содержимое внутри VFS
cd [путь] — меняет текущую директорию (только внутри VFS)
Защита:

Нельзя выйти за пределы VFS (cd ../../etc → ошибка)
Тестовые VFS:

vfs_minimal/ — минимальная структура
vfs_deep/ — 3+ уровня вложенности
Запуск
GUI-режим:
```bash
python3 main.py --vfs ./vfs_deep --log ./logs/gui.log
```
Скрипт-режим:
```bash
python3 main.py --vfs ./vfs_deep --log ./logs/script.log --script ./scripts/commands_deep.txt
```
Тестовые скрипты
В папке scripts/:

vfs_test_minimal.sh — минимальная VFS
vfs_test_deep.sh — глубокая VFS
full_test.sh — полный тест всех команд и ошибок
Запуск:

```bash
./scripts/vfs_test_minimal.sh
```
Лог-файл
Формат JSON. Пример записи:

```json
{
  "user": "user",
  "command": "ls",
  "args": [],
  "timestamp": "2025-10-05T17:56:01.024491"
}
```

